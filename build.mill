package build

import mill._, scalalib._, publish._

val Http4sVersion = "0.23.29"
val CirceVersion = "0.14.10"

object `apollo-auth` extends ScalaModule with PublishModule {
  def scalaVersion = "3.3.3"
  def artifactId = "apollo-auth"
  def publishVersion = "0.1.0-SNAPSHOT"

  def pomSettings: Target[PomSettings] = PomSettings(
    organization = "me.joshuakfarrar",
    description = "An authentication solution for Http4s",
    url = "https://github.com/joshuakfarrar/apollo",
    licenses = Seq(License.MIT),
    versionControl = VersionControl(browsableRepository = Some("https://github.com/joshuakfarrar/apollo")),
    developers = Seq(Developer(
      id = "joshuakfarrar",
      name = "Joshua K. Farrar",
      url = "https://github.com/joshuakfarrar"
    ))
  )

  def ivyDeps = Agg(
    ivy"com.microsoft.sqlserver:mssql-jdbc:12.9.0.jre11-preview",
    ivy"org.http4s::http4s-ember-server:$Http4sVersion",
    ivy"org.http4s::http4s-ember-client:$Http4sVersion",
    ivy"org.http4s::http4s-dsl:$Http4sVersion",
    ivy"org.typelevel::cats-core:2.13.0",
    ivy"org.typelevel::cats-effect:3.5.4",
    ivy"com.password4j:password4j:1.8.2",
    ivy"org.tpolecat::doobie-core:1.0.0-RC6",
    ivy"io.circe::circe-generic:$CirceVersion",
    ivy"org.http4s::http4s-circe:$Http4sVersion",
    ivy"co.fs2::fs2-core:3.11.0",
    ivy"co.fs2::fs2-io:3.11.0",
    ivy"com.lihaoyi::scalatags:0.13.1",
    ivy"com.lihaoyi::upickle:4.1.0",
  )
}
